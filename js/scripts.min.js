var App={};App.core=function(t,e,n,r){function i(t){if(!F){var e={};n.extend(e,t),NProgress.configure({minimum:.1,showSpinner:!1}),F=!0}}function o(){F=!1}function u(){return C}function s(){return j}function a(t){if(B(t))for(;t.length>0;)t.pop()}function l(t){return B(t)&&0!==t.length?t[t.length-1]:r}function f(t,e){return U.call(t,e)}function c(t){return t===!0||t===!1||b(t)&&L.call(t)===k.BOOLEAN}function p(t){if(E(t))return!0;if(B(t)||A(t))return 0===t.length;for(var e in t)if(f(t,e))return!1;return!0}function d(t){return O(t)&&P.FLOAT.test(""+t)}function g(t){return T(t)&&L.call(t)===k.FUNCTION}function m(t){return O(t)&&P.INTEGER.test(""+t)}function h(t){return t instanceof n}function N(t){return h(t)&&0!==t.length}function y(t){return null!==t}function v(t){return null===t}function E(t){return v(t)||_(t)}function O(t){return"number"==typeof t||b(t)&&L.call(t)===k.NUMBER}function T(t){var e=typeof t;return!!t&&("object"===e||"function"===e)}function b(t){return!!t&&"object"==typeof t}function A(t){return"string"==typeof t||L.call(t)===k.STRING}function S(t){return A(t)&&P.FLOAT.test(t)}function w(t){return A(t)&&P.INTEGER.test(t)}function I(t){return A(t)&&(P.FLOAT.test(t)||P.INTEGER.test(t))}function _(t){return t===r}function R(t,e){return O(t)&&O(e)?Math.floor(Math.random()*e+t):0}var j="1.0.0",C="SoftwareSpot",F=!1,k={BOOLEAN:"[object Boolean]",FUNCTION:"[object Function]",NUMBER:"[object Number]",STRING:"[object String]"},D=Object.prototype,U=D.hasOwnProperty,L=D.toString,P={FLOAT:/(?:^-?\d+\.\d+$)/,INTEGER:/(?:^-?\d+$)/},B=Array.isArray;return n(function(){i({})}),{init:i,destroy:o,getAppName:u,getVersion:s,arrayClear:a,arrayPeek:l,has:f,isArray:B,isBoolean:c,isEmpty:p,isFloat:d,isFunction:g,isInteger:m,isjQuery:h,isjQueryNotEmpty:N,isNotNull:y,isNull:v,isNullOrUndefined:E,isNumber:O,isObject:T,isString:A,isStringFloat:S,isStringInteger:w,isStringNumber:I,isUndefined:_,randomNumber:R}}(this,this.document,this.jQuery),App.core.api=function(t,e,n,r,i){function o(t){if(!N){var e={};n.extend(e,t),a(),l(),N=!0}}function u(){y=null,N=!1}function s(){return m}function a(){y=n(e)}function l(){NProgress.configure({minimum:.1,showSpinner:!1}),y.ajaxStart(function(){NProgress.start()}),y.ajaxStop(function(){NProgress.done()})}function f(){NProgress.start(),t.setTimeout(NProgress.done,1e3)}function c(){return i}function p(){return i}function d(){return i}function g(t,e){if(!r.isString(t)||!r.isObjectLiteral(e))return null;for(var n=""+t,i=/{([^\}]+)}/g;;){var o=i.exec(n);if(r.isNull(o))break;var u=o[1];if(r.has(e,u)&&!r.isUndefined(e[u])){var s=o[0];t=t.replace(s,e[u])}}}var m="1.0.0",h={OK:200,CREATED:201,NO_CONTENT:204,NOT_MODIFIED:304,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,CONFLICT:409,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501},N=!1,y=null;return n(function(){o({})}),{init:o,destroy:u,getVersion:s,HTTPStatus:h,fetch:f,"delete":c,get:p,post:d,parseUrl:g}}(this,this.document,this.jQuery,App.core),App.weight=function(t,e,n,r,i){function o(t){if(!N){var e={};n.extend(e,t),_=t.data_id,R=t.templates.weight_list,a(t.dom),l(),w.prop("disabled",!0),I.addClass("hide"),v=F.get();var i=r.arrayPeek(v);r.isUndefined(i)||(E=i.id),E++,d(v),N=!0}}function u(){f(),O=null,T=null,b=null,b=null,S=null,w=null,I=null,r.arrayClear(v),N=!1}function s(){return m}function a(t){O=n(e),T=n(t.weight_list),b=n(t.forms.weight),A=b.find('input[type="text"]'),S=b.find('[type="reset"]'),w=b.find('input[type="submit"]'),I=n(t.weight_list_error)}function l(){y&&f(),O.on(C.remove,"["+_+"]",C.removal),b.on(C.submit,C.submission),A.on(C.keyup,C.release),S.on(C.reset,C.destroy),y=!0}function f(){y&&(O.off(C.remove,"["+_+"]",C.removal),b.off(C.submit,C.submission),A.off(C.keyup,C.release),S.off(C.reset,C.destroy),y=!1)}function c(t){r.isFloat(t)||(t=parseFloat(t));var e=moment().unix();v.push({id:E++,value:t,time:e,username:"User "+r.randomNumber(10,20),iso8601:moment.unix(e).toISOString()})}function p(t){r.isInteger(t)||(t=parseInt(t));for(var e=0,n=v.length;n>e;e++){var i=v[e];if(i.id===t){v.splice(e,1);break}}}function d(t){T.handlebars("add",R,t,{remove_type:"same",validate:!r.isEmpty(t)})}function g(t){return r.isString(t)||(t=""+t),t.trim().length>0&&j.test(t)}var m="1.0.0",h="772C021E-61EA-4B15-8330-B2274E891371",N=!1,y=!1,v=[],E=0,O=null,T=null,b=null,A=null,S=null,w=null,I=null,_=null,R=null,j=/^(?!0+)(?:\d+(?:\.\d)?)$/,C={keyup:"keyup.app.weight",remove:"click.remove.app.weight",reset:"click.reset.app.weight",submit:"submit.app.weight",destroy:function(){NProgress.done(),I.addClass("hide"),F.clear(),d(v)},release:function(t){t.preventDefault();var e=t.currentTarget.value;return g(e)?(w.prop("disabled",!1),i):(w.prop("disabled",!0),i)},removal:function(t){t.preventDefault();var e=t.currentTarget.getAttribute(_);p(e),F.set(v),d(v)},submission:function(t){t.preventDefault();var e=t.currentTarget[0];w.prop("disabled",!0);var n=e.value;return g(n)?(A.val(""),I.addClass("hide"),r.api.fetch(),c(n),F.set(v),d(v),i):(I.removeClass("hide"),i)}},F={key:h+"_app.weight_list",clear:function(){sessionStorage.removeItem(this.key),r.arrayClear(v)},remove:function(){this.clear()},get:function(){var t=sessionStorage.getItem(this.key);return r.isNull(t)?[]:JSON.parse(t)},set:function(t){r.isArray(t)&&sessionStorage.setItem(this.key,JSON.stringify(t))}};return n(function(){o({data_id:"data-weight-id",dom:{forms:{weight:"#weight-post-form"},weight_list:"#weight-list",weight_list_error:"#weight-list-error"},templates:{weight_list:"#template-weight-list"}})}),{init:o,destroy:u,getVersion:s,isValidWeight:g}}(this,this.document,this.jQuery,App.core);