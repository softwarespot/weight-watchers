var App={};App.core=function(n,t,e,r){function i(){H||(n.NProgress.configure({minimum:.1,showSpinner:!1}),H=!0)}function o(){H=!1}function u(){return G}function s(){return B}function c(){return K}function a(n){m(n)&&(K=n)}function f(n){if(J(n))for(;n.length>0;)n.pop()}function l(n){return _(n)?n.replace($.REGEXP_ESCAPE,"\\$1"):null}function p(n){return J(n)&&0!==n.length?n[n.length-1]:r}function g(n,t){return Q.call(n,t)}function d(n){var t=I(n)?W.call(n):M;return t===V.FUNCTION||t===V.GENERATOR}function m(n){return n===!0||n===!1||O(n)&&W.call(n)===V.BOOLEAN}function h(n){if(T(n)||0===n)return!0;if(J(n)||_(n))return 0===n.length;for(var t in n)if(g(n,t))return!1;return!0}function E(n){return A(n)&&$.FLOAT.test(k(n))}function w(n){return A(n)&&$.INTEGER.test(k(n))}function v(n){return n instanceof e}function N(n){return v(n)&&0!==n.length}function y(n){return null!==n}function S(n){return null===n}function T(n){return S(n)||R(n)}function A(n){return"number"==typeof n||O(n)&&W.call(n)===V.NUMBER}function I(n){var t=typeof n;return!!n&&("object"===t||"function"===t)}function O(n){return!!n&&"object"==typeof n}function F(n){return O(n)?n.constructor&&!g(n.constructor.prototype,"isPrototypeOf")?!1:!0:!1}function _(n){return"string"==typeof n||W.call(n)===V.STRING}function b(n){return _(n)&&$.FLOAT.test(n)}function P(n){return _(n)&&$.INTEGER.test(n)}function C(n){return _(n)&&($.FLOAT.test(n)||$.INTEGER.test(n))}function R(n){return n===r}function L(t,e){return A(t)&&A(e)?n.Math.floor(n.Math.random()*e+t):0}function D(t,e){return t=k(t),d(n.String.prototype.includes)?n.String.prototype.includes.call(t,e):-1!==t.indexOf(e)}function U(t){for(var e=[],r=1,i=arguments.length;i>r;r++)e.push(arguments[r]);return t=k(t),e.forEach(function(e,r){var i=new n.RegExp("\\{"+r+"\\}","gi");t=t.replace(i,e)}),t}function j(t){return _(t)?d(n.String.prototype.trim)?n.String.prototype.trim.call(t):t.replace($.TRIM,M):M}function k(n){return _(n)?n:T(n)?M:M+n}function x(t,e){return t=k(t),0===t.length?t:T(e)?j(t):(e="["+l(k(e))+"]",t.replace(new n.RegExp("^"+e+"+|"+e+"+$","g"),M))}var B="1.0.0",G="SoftwareSpot",M="",H=!1,V={BOOLEAN:"[object Boolean]",FUNCTION:"[object Function]",GENERATOR:"[object GeneratorFunction]",NUMBER:"[object Number]",STRING:"[object String]"},Y=n.Object.prototype,Q=Y.hasOwnProperty,W=Y.toString,$={FLOAT:/(?:^(?!-?0+)-?\d+\.\d+$)/,INTEGER:/(?:^(?!-?0+)-?\d+$)/,TRIM:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g},K=!1,J=d(n.Array.isArray)?n.Array.isArray:function(n){return W.call(n)===V.ARRAY};return e(function(){i()}),{init:i,destroy:o,getAppName:u,getVersion:s,isDebug:c,setIsDebug:a,arrayClear:f,arrayPeek:p,escapeRegExChars:l,has:g,isArray:J,isBoolean:m,isEmpty:h,isFloat:E,isFunction:d,isInteger:w,isjQuery:v,isjQueryNotEmpty:N,isNotNull:y,isNull:S,isNullOrUndefined:T,isNumber:A,isObject:I,isObjectLiteral:F,isString:_,isStringFloat:b,isStringInteger:P,isStringNumber:C,isUndefined:R,randomNumber:L,stringContains:D,stringFormat:U,stringStripWS:j,toString:k,trim:x}}(this,this.document,this.jQuery),App.core.api=function(n,t,e,r,i){function o(){O||(c(),a(),O=!0)}function u(){F=null,O=!1}function s(){return S}function c(){F=e(t)}function a(){n.NProgress.configure({minimum:.1,showSpinner:!1}),F.ajaxStart(function(){n.NProgress.start()}),F.ajaxStop(function(){n.NProgress.done()})}function f(t){if(t.status>=I.OK&&t.status<I.MULTIPLE_CHOICES)return t;var e=new n.Error(t.statusText);throw e.response=t,e}function l(n){return r.isEmpty(n.text())?n:n.json()}function p(t,e,i,o){return new n.Promise(function(u,s){if(t=w(t,i),t=v()+y(t),r.isDebug())n.setTimeout(function(){0===r.randomNumber(0,1e3)?s():u()},T);else{var c={method:e,headers:{Accept:"application/json","Content-Type":"application/json"}},a=e===A.PUT||e===A.POST;a&&(n.console.log("fetch() body...",o),c.body=n.JSON.stringify(o)),n.console.log("fetch() in progress...",t,c),n.fetch(t,c).then(f).then(l).then(function(n){u(n)})["catch"](function(n){s(n)})}})}function g(){n.NProgress.start(),n.setTimeout(n.NProgress.done,T)}function d(t,e){return new n.Promise(function(r,i){n.NProgress.start(),p(t,A.DELETE,e).then(function(t){n.NProgress.done(),r(t)})["catch"](function(t){n.NProgress.done(),i(t)})})}function m(t,e){return new n.Promise(function(r,i){n.NProgress.start(),p(t,A.GET,e).then(function(t){n.NProgress.done(),r(t)})["catch"](function(t){n.NProgress.done(),i(t)})})}function h(t,e,r){return new n.Promise(function(i,o){n.NProgress.start(),p(t,A.PUT,e,r).then(function(t){n.NProgress.done(),i(t)})["catch"](function(t){n.NProgress.done(),o(t)})})}function E(t,e,r){return new n.Promise(function(i,o){n.NProgress.start(),p(t,A.POST,e,r).then(function(t){n.NProgress.done(),i(t)})["catch"](function(t){n.NProgress.done(),o(t)})})}function w(n,t){if(!r.isString(n)||!r.isObjectLiteral(t))return n;for(var e=r.toString(n),i=/{([^\}]+)}/g;;){var o=i.exec(e);if(r.isNull(o))break;var u=o[1];if(r.has(t,u)&&!r.isUndefined(t[u])){var s=o[0];n=n.replace(s,t[u])}}return n}function v(){return _}function N(n){r.isString(n)&&0!==n.trim().length&&(_=y(n)+"/")}function y(n){return r.isString(n)?r.trim(n,"/"):""}var S="1.0.0",T=750,A={DELETE:"delete",GET:"get",PATCH:"patch",POST:"post",PUT:"put"},I={OK:200,CREATED:201,NO_CONTENT:204,MULTIPLE_CHOICES:300,NOT_MODIFIED:304,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,CONFLICT:409,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501},O=!1,F=null,_="";return e(function(){o({})}),{init:o,destroy:u,getVersion:s,Methods:A,HTTPStatus:I,fetch:g,"delete":d,get:m,put:h,post:E,parseUrl:w,getPrefix:v,setPrefix:N,trimSlashes:y}}(window,window.document,window.jQuery,window.App.core),App.core.emitter=function(n,t,e,r,i){function o(){return p}function u(){g={}}function s(t){function e(t,e){n.setTimeout(function(){e.apply(t,i)},0)}if(l(t)){var r=g[t];if(f(r)){for(var i=[],o=1,u=arguments.length;u>o;o++)i.push(arguments[o]);r.forEach(function(n){e(this,n)})}}}function c(n,t){if(l(n)&&r.isFunction(t)){var e=g[n];if(f(e)){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}}}function a(n,t){if(l(n)&&r.isFunction(t)){g[n]=g[n]||[];var e=g[n];-1===e.indexOf(t)&&e.push(t)}}function f(n){return r.isArray(n)&&n.length>0}function l(n){return r.isString(n)&&n.trim().length>0}var p="1.0.0",g={};return{getVersion:o,clear:u,emit:s,off:c,on:a}}(window,window.document,window.jQuery,window.App.core),App.core.events={NAVIGATION_CLICK:"click.navigation.app",USER_SELECT:"change.user.app"},App.core.session=function(n,t){function e(n,e){this._key=t.isString(n)&&0!==n.length?o+n:o,this._has=r(e),this._storage=this._has?e:u}function r(n){return t.isObject(n)&&"key"in n&&"getItem"in n&&"setItem"in n&&"removeItem"in n&&"clear"in n}var i="1.0.0",o="3943925F-EDCC-45E2-B451-8F0178F6BB24",u=n.sessionStorage;return e.prototype={clear:function(){try{this._storage.removeItem(this._key)}catch(t){n.console.log("An error occurred with Session.clear()",t)}},get:function(){var t=null;try{t=this._storage.getItem(this._key)}catch(e){n.console.log("An error occurred with Session.get()",e)}return t},has:function(){return this._has},remove:this.clear,set:function(t){try{this._storage.setItem(this._key,t)}catch(e){n.console.log("An error occurred with Session.set()",e)}},getVersion:function(){return i}},e}(window,window.App.core),App.navigation=function(n,t,e,r,i){function o(){f(),c(),d=!0}function u(){a(),m=null,h=null,d=!1}function s(){return p}function c(){g&&a(),h.on(E.navigation,E.navigationFn),g=!0}function a(){g&&(h.off(E.navigation,E.navigationFn),g=!1)}function f(){m=e("html, body"),h=m.find("header").find("a")}function l(n,t){r.isUndefined(t)&&(t=500),m.animate({scrollTop:n.offset().top},t)}var p="1.0.0",g=!1,d=!1,m=null,h=null,E={navigation:r.events.NAVIGATION_CLICK,navigationFn:function(t){var i=t.currentTarget.getAttribute("href"),o="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",u=new n.RegExp("^#"+o+"$");if(r.emitter.emit(r.events.NAVIGATION_CLICK,i),!u.test(i))return!0;t.preventDefault();var s=e(i);return r.isjQueryNotEmpty(s)?(l(s,500),!1):!1}};return e(function(){o()}),{init:o,destroy:u,getVersion:s}}(window,window.document,window.jQuery,window.App.core),App.user=function(n,t,e,r,i){function o(n){if(!h){var t={};e.extend(t,n),v=n.templates.userList,f(n.dom),c(),r.api.setPrefix("api"),y.usersFn(),h=!0}}function u(){a(),E=null,h=!1}function s(){return p}function c(){m&&a(),r.emitter.on(y.signIn,y.signInFn),E.on(y.select,y.selectFn),m=!0}function a(){m&&(r.emitter.off(y.signInEvent,y.signIn),E.off(y.select,y.selectFn),m=!1)}function f(n){var t=e(n.html);E=t.find(n.userList)}function l(n){var t=E.handlebars("add",v,n,{remove_type:"same",type:"COMPILED",validate:!r.isEmpty(n)});E.append(t)}var p="1.0.0",g="B33D672B-E507-478E-99D1-3B0CA10CD765",d={USERS:"users"},m=!1,h=!1,E=null,w=["softwarespot","squidge","brainbox"],v=null,N=new r.session(g+"_users,app"),y={select:r.events.USER_SELECT,signIn:r.events.NAVIGATION_CLICK,selectFn:function(){var n=event.currentTarget.value;r.isString(n)&&r.emitter.emit(y.select,n)},usersFn:function(){var t=N.get();return r.isNull(t)?(r.api.get(d.USERS).then(function(t){r.isDebug()&&(t=w),N.set(n.JSON.stringify(t)),l({usernames:t})})["catch"](function(){l(null)}),i):(l({usernames:n.JSON.parse(t)}),i)},signInFn:function(t){"#signin-section"===t&&n.console.log("Sign in was called, but nothing took place as of yet")}};return e(function(){o({dom:{html:"#weight-post-form",userList:'select[name="username"]'},templates:{userList:"#template-user-list"}})}),{init:o,destroy:u,getVersion:s}}(window,window.document,window.jQuery,window.App.core),App.weight=function(n,t,e,r,i){function o(n){if(!I){var t={};e.extend(t,n),G=n.dataId,M=n.templates.weightList,c(n.dom),a(),x.prop("disabled",!0),B.addClass("hide"),r.api.setPrefix("api"),I=!0}}function u(){f(),L=null,D=null,C=null,U=null,U=null,k=null,x=null,B=null,r.arrayClear(d()),I=!1}function s(){return N}function c(n){var r=e(n.html);D=r.find(n.weightList),C=r.find(n.displayAll),U=r.find(n.forms.weight),j=U.find('input[type="text"]'),k=U.find('[type="reset"]'),x=U.find('input[type="submit"]'),B=r.find(n.weightListError),L=e(t)}function a(){A&&f(),r.emitter.on(V.select,V.selectFn),L.on(V.remove,"["+G+"]",V.removeFn),C.on(V.checked,V.displayAllFn),U.on(V.submit,V.submitFn),j.on(V.keyup,V.keyupFn),k.on(V.reset,V.resetFn),A=!0}function f(){A&&(r.emitter.off(V.select,V.selectFn),L.off(V.remove,"["+G+"]",V.removeFn),C.off(V.checked,V.displayAllFn),U.off(V.submit,V.submitFn),j.off(V.keyup,V.keyupFn),k.off(V.reset,V.resetFn),A=!1)}function l(n){return n=r.toString(n),!r.isEmpty(n)&&H.test(n)}function p(t){if(r.isNull(t))return!1;var e=n.moment(t.time).format(T);return!P&&F.has(e)?!1:(t.iso8601=n.moment(t.time).toISOString(),F.add(e),O.push(t),!0)}function g(t){if(r.isFloat(t)||(t=n.parseFloat(t)),0===t)return null;var e=0;return n.moment.isMoment(_)?(e=_.valueOf(),_=_.add(1,"days")):e=n.moment().valueOf(),{id:b++,value:t,time:e,username:R}}function d(n){if(!r.isInteger(n)||0>n||n>=O.length)return O;var t=O[n];return r.isUndefined(t)?O:t}function m(t){if(r.isInteger(t)||(t=n.parseInt(t)),0===t)return null;for(var e=0,i=O.length;i>e;e++){var o=O[e];if(o.id===t)return o.username}return null}function h(t){if(r.isInteger(t)||(t=n.parseInt(t)),0!==t)for(var e=0,i=O.length;i>e;e++){var o=O[e];if(o.id===t){O.splice(e,1);break}}}function E(n){D.handlebars("add",M,n,{remove_type:"same",validate:!r.isEmpty(n)})}function w(n){return r.stringContains(n,",")?n.replace(",","."):n}function v(){O=Q.get(),F.clear();var n=r.arrayPeek(O);r.isUndefined(n)||(b=n.id),b++}var N="1.0.0",y="772C021E-61EA-4B15-8330-B2274E891371",S={USERS:"users",WEIGHT_BY_ID:"weights/{id}",WEIGHT_BY_USERNAME_AND_ID:"users/{username}/weights/{id}",WEIGHTS_ALL:"weights",WEIGHTS_BY_USERNAME:"users/{username}/weights"},T="YYYYMMDD",A=!1,I=!1,O=[],F=new n.Set,_=null,b=0,P=!1,C=null,R=null,L=null,D=null,U=null,j=null,k=null,x=null,B=null,G=null,M=null,H=/^(?!0+)(?:\d+(?:[.,]\d)?)$/,V={checked:"change.display_all.weight.app",keyup:"keyup.weight.app",remove:"click.remove.weight.app",reset:"click.reset.weight.app",select:r.events.USER_SELECT,submit:"submit.weight.app",displayAllFn:function(n){var t=n.currentTarget;P=t.checked,r.emitter.emit(V.select,R)},keyupFn:function(n){n.preventDefault();var t=n.currentTarget.value;return l(t)?(x.prop("disabled",!1),i):(x.prop("disabled",!0),i)},resetFn:function(){n.NProgress.done(),B.addClass("hide"),Q.clear(),r.arrayClear(d()),E(d())},removeFn:function(t){t.preventDefault();var e=t.currentTarget.getAttribute(G);r.api["delete"](S.WEIGHT_BY_USERNAME_AND_ID,{id:e,username:m(e)}).then(function(n){e=r.isDebug()?e:n.id,h(e),Q.set(d()),E(d())})["catch"](function(){n.console.log("Some error occurred with DELETE'in the weight value")})},selectFn:function(t){r.isEmpty(t)||(R=t,r.api.get(S.WEIGHTS_BY_USERNAME,{username:R}).then(function(t){if(Q.clear(),v(),r.isDebug()){var e=r.randomNumber(5,20);n.moment.isMoment(_)||(_=n.moment().subtract(e+r.randomNumber(5,200),"days"));for(var i=0;e>i;i++)p(g(1*r.randomNumber(45,200)));_=null}else t.forEach(function(n){p(n)});Q.set(d()),v(),E(d())})["catch"](function(){E(d())}))},submitFn:function(t){t.preventDefault();var e=t.currentTarget[0];x.prop("disabled",!0);var o=e.value;return l(o)?(j.val(""),B.addClass("hide"),o=w(o),r.api.post(S.WEIGHTS_BY_USERNAME,{username:R},{id:0,value:o,time:0,username:R}).then(function(n){n=r.isDebug()?g(o):n,p(n)&&(Q.set(d()),E(d()))})["catch"](function(){n.console.log("Some error occurred with POST'in the weight value")}),i):(B.removeClass("hide"),i)}},Y=new r.session(y+"_weight_list.app"),Q={clear:function(){Y.clear()},has:function(){return Y.has()},remove:this.clear,get:function(){var t=Y.get();return r.isEmpty(t)?[]:n.JSON.parse(t)},set:function(n){r.isArray(n)&&Y.set(n)}};return e(function(){o({dataId:"data-weight-id",dom:{html:"#weight-section",forms:{weight:"#weight-post-form"},displayAll:'[name="display-all"]',weightList:"#weight-list",weightListError:"#weight-list-error"},templates:{weightList:"#template-weight-list"}})}),{init:o,destroy:u,getVersion:s,isValidWeight:l}}(window,window.document,window.jQuery,window.App.core);