var App={};App.core=function(t,n,e,r){function i(){H||(NProgress.configure({minimum:.1,showSpinner:!1}),H=!0)}function o(){H=!1}function u(){return M}function s(){return k}function c(){return K}function a(t){m(t)&&(K=t)}function f(t){if(J(t))for(;t.length>0;)t.pop()}function l(t){return w(t)?t.replace($.REGEXP_ESCAPE,"\\$1"):null}function g(t){return J(t)&&0!==t.length?t[t.length-1]:r}function p(t,n){return W.call(t,n)}function h(t){var n=O(t)?Y.call(t):B;return n===V.FUNCTION||n===V.GENERATOR}function m(t){return t===!0||t===!1||b(t)&&Y.call(t)===V.BOOLEAN}function d(t){if(I(t)||0===t)return!0;if(J(t)||w(t))return 0===t.length;for(var n in t)if(p(t,n))return!1;return!0}function E(t){return A(t)&&$.FLOAT.test(x(t))}function N(t){return A(t)&&$.INTEGER.test(x(t))}function v(t){return t instanceof e}function T(t){return v(t)&&0!==t.length}function y(t){return null!==t}function S(t){return null===t}function I(t){return S(t)||R(t)}function A(t){return"number"==typeof t||b(t)&&Y.call(t)===V.NUMBER}function O(t){var n=typeof t;return!!t&&("object"===n||"function"===n)}function b(t){return!!t&&"object"==typeof t}function F(t){return b(t)?t.constructor&&!p(t.constructor.prototype,"isPrototypeOf")?!1:!0:!1}function w(t){return"string"==typeof t||Y.call(t)===V.STRING}function P(t){return w(t)&&$.FLOAT.test(t)}function _(t){return w(t)&&$.INTEGER.test(t)}function L(t){return w(t)&&($.FLOAT.test(t)||$.INTEGER.test(t))}function R(t){return t===r}function C(n,e){return A(n)&&A(e)?t.Math.floor(t.Math.random()*e+n):0}function U(n,e){return w(n)?h(t.String.prototype.includes)?t.String.prototype.includes.call(n,e):-1!==n.indexOf(e):!1}function D(n){for(var e=[],r=1,i=arguments.length;i>r;r++)e.push(arguments[r]);return n=x(n),e.forEach(function(e,r){var i=new t.RegExp("\\{"+r+"\\}","gi");n=n.replace(i,e)}),n}function j(n){return w(n)?h(t.String.prototype.trim)?t.String.prototype.trim.call(n):n.replace($.TRIM,B):B}function x(t){return w(t)?t:I(t)?B:B+t}function G(n,e){return n=x(n),0===n.length?n:I(e)?j(n):(e="["+l(x(e))+"]",n.replace(new t.RegExp("^"+e+"+|"+e+"+$","g"),B))}var k="1.0.0",M="SoftwareSpot",B="",H=!1,V={BOOLEAN:"[object Boolean]",FUNCTION:"[object Function]",GENERATOR:"[object GeneratorFunction]",NUMBER:"[object Number]",STRING:"[object String]"},Q=t.Object.prototype,W=Q.hasOwnProperty,Y=Q.toString,$={FLOAT:/(?:^(?!-?0+)-?\d+\.\d+$)/,INTEGER:/(?:^(?!-?0+)-?\d+$)/,TRIM:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g},K=!1,J=h(t.Array.isArray)?t.Array.isArray:function(t){return Y.call(t)===V.ARRAY};return e(function(){i()}),{init:i,destroy:o,getAppName:u,getVersion:s,isDebug:c,setIsDebug:a,arrayClear:f,arrayPeek:g,escapeRegExChars:l,has:p,isArray:J,isBoolean:m,isEmpty:d,isFloat:E,isFunction:h,isInteger:N,isjQuery:v,isjQueryNotEmpty:T,isNotNull:y,isNull:S,isNullOrUndefined:I,isNumber:A,isObject:O,isObjectLiteral:F,isString:w,isStringFloat:P,isStringInteger:_,isStringNumber:L,isUndefined:R,randomNumber:C,stringContains:U,stringFormat:D,stringStripWS:j,toString:x,trim:G}}(this,this.document,this.jQuery),App.core.api=function(t,n,e,r,i){function o(){b||(c(),a(),b=!0)}function u(){F=null,b=!1}function s(){return S}function c(){F=e(n)}function a(){NProgress.configure({minimum:.1,showSpinner:!1}),F.ajaxStart(function(){NProgress.start()}),F.ajaxStop(function(){NProgress.done()})}function f(n){if(n.status>=O.OK&&n.status<O.MULTIPLE_CHOICES)return n;var e=new t.Error(n.statusText);throw e.response=n,e}function l(t){var n=t.json();return n?n:t}function g(n,e,i,o){return new t.Promise(function(u,s){if(n=N(n,i),n=v()+y(n),r.isDebug())t.setTimeout(function(){0===r.randomNumber(0,1e3)?s():u()},I);else{var c={method:e,headers:{Accept:"application/json","Content-Type":"application/json"}},a=e===A.PUT||e===A.POST;a&&(t.console.log("fetch() body...",o),c.body=t.JSON.stringify(o)),t.console.log("fetch() in progress...",n,c),t.fetch(n,c).then(f).then(l).then(function(t){u(t)})["catch"](function(){s()})}})}function p(){NProgress.start(),t.setTimeout(NProgress.done,I)}function h(n,e){return new t.Promise(function(t,r){NProgress.start(),g(n,A.DELETE,e).then(function(n){NProgress.done(),t(n)})["catch"](function(t){NProgress.done(),r(t)})})}function m(n,e){return new t.Promise(function(t,r){NProgress.start(),g(n,A.GET,e).then(function(n){NProgress.done(),t(n)})["catch"](function(t){NProgress.done(),r(t)})})}function d(n,e,r){return new t.Promise(function(t,i){NProgress.start(),g(n,A.PUT,e,r).then(function(n){NProgress.done(),t(n)})["catch"](function(t){NProgress.done(),i(t)})})}function E(n,e,r){return new t.Promise(function(t,i){NProgress.start(),g(n,A.POST,e,r).then(function(n){NProgress.done(),t(n)})["catch"](function(t){NProgress.done(),i(t)})})}function N(t,n){if(!r.isString(t)||!r.isObjectLiteral(n))return t;for(var e=r.toString(t),i=/{([^\}]+)}/g;;){var o=i.exec(e);if(r.isNull(o))break;var u=o[1];if(r.has(n,u)&&!r.isUndefined(n[u])){var s=o[0];t=t.replace(s,n[u])}}return t}function v(){return w}function T(t){r.isString(t)&&0!==t.trim().length&&(w=y(t)+"/")}function y(t){return r.isString(t)?r.trim(t,"/"):""}var S="1.0.0",I=750,A={DELETE:"delete",GET:"get",PATCH:"patch",POST:"post",PUT:"put"},O={OK:200,CREATED:201,NO_CONTENT:204,MULTIPLE_CHOICES:300,NOT_MODIFIED:304,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,CONFLICT:409,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501},b=!1,F=null,w="";return e(function(){o({})}),{init:o,destroy:u,getVersion:s,Methods:A,HTTPStatus:O,fetch:p,"delete":h,get:m,put:d,post:E,parseUrl:N,getPrefix:v,setPrefix:T,trimSlashes:y}}(this,this.document,this.jQuery,App.core),App.core.emitter=function(t,n,e,r,i){function o(){return g}function u(){p={}}function s(n){function e(n,e){t.setTimeout(function(){e.apply(n,i)},0)}if(l(n)){var r=p[n];if(f(r)){for(var i=[],o=1,u=arguments.length;u>o;o++)i.push(arguments[o]);r.forEach(function(t){e(this,t)})}}}function c(t,n){if(l(t)&&r.isFunction(n)){var e=p[t];if(f(e)){var i=e.indexOf(n);-1!==i&&e.splice(i,1)}}}function a(t,n){if(l(t)&&r.isFunction(n)){p[t]=p[t]||[];var e=p[t];-1===e.indexOf(n)&&e.push(n)}}function f(t){return r.isArray(t)&&t.length>0}function l(t){return r.isString(t)&&t.trim().length>0}var g="1.0.0",p={};return{getVersion:o,clear:u,emit:s,off:c,on:a}}(this,this.document,this.jQuery,App.core),App.core.events={NAVIGATION_CLICK:"click.navigation.app",USER_SELECT:"change.user.app"},App.navigation=function(t,n,e,r,i){function o(){f(),c(),h=!0}function u(){a(),m=null,d=null,h=!1}function s(){return g}function c(){p&&a(),d.on(E.navigation,E.navigationFn),p=!0}function a(){p&&(d.off(E.navigation,E.navigationFn),p=!1)}function f(){m=e("html, body"),d=e("header").find("a")}function l(t,n){r.isUndefined(n)&&(n=500),m.animate({scrollTop:t.offset().top},n)}var g="1.0.0",p=!1,h=!1,m=null,d=null,E={navigation:r.events.NAVIGATION_CLICK,navigationFn:function(n){var i=n.currentTarget.getAttribute("href"),o="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",u=new t.RegExp("^#"+o+"$");if(r.emitter.emit(r.events.NAVIGATION_CLICK,i),!u.test(i))return!0;n.preventDefault();var s=e(i);return r.isjQueryNotEmpty(s)?(l(s,500),!1):!1}};return e(function(){o()}),{init:o,destroy:u,getVersion:s}}(this,this.document,this.jQuery,this.App.core),App.user=function(t,n,e,r,i){function o(t){if(!p){var n={};e.extend(n,t),m=t.templates.userList,f(t.dom),c(),r.api.setPrefix("api"),p=!0}}function u(){a(),h=null,p=!1}function s(){return l}function c(){g&&a(),r.emitter.on(d.signIn,d.signInFn),h.on(d.select,d.selectFn),g=!0}function a(){g&&(r.emitter.off(d.signInEvent,d.signIn),h.off(d.select,d.selectFn),g=!1)}function f(t){h=e(t.userList)}var l="1.0.0",g=!1,p=!1,h=null,m=null,d={select:r.events.USER_SELECT,signIn:r.events.NAVIGATION_CLICK,selectFn:function(){var t=event.currentTarget.value;r.isString(t)&&r.emitter.emit(d.select,t)},signInFn:function(n){"#signin-section"===n&&t.console.log("Sign in was called, but nothing took place as of yet")}};return e(function(){o({dom:{userList:'select[name="username"]'},templates:{userList:""}})}),{init:o,destroy:u,getVersion:s}}(this,this.document,this.jQuery,App.core),App.weight=function(t,n,e,r,i){function o(t){if(!A){var n={};e.extend(n,t),D=t.dataId,j=t.templates.weightList,c(t.dom),a(),C.prop("disabled",!0),U.addClass("hide"),r.api.setPrefix("api"),F=F[r.randomNumber(0,F.length-1)],A=!0}}function u(){f(),w=null,P=null,_=null,_=null,R=null,C=null,U=null,r.arrayClear(h()),A=!1}function s(){return T}function c(t){w=e(n),P=e(t.weightList),_=e(t.forms.weight),L=_.find('input[type="text"]'),R=_.find('[type="reset"]'),C=_.find('input[type="submit"]'),U=e(t.weightListError)}function a(){I&&f(),r.emitter.on(G.select,G.selectFn),w.on(G.remove,"["+D+"]",G.removeFn),_.on(G.submit,G.submitFn),L.on(G.keyup,G.keyupFn),R.on(G.reset,G.resetFn),I=!0}function f(){I&&(r.emitter.off(G.select,G.selectFn),w.off(G.remove,"["+D+"]",G.removeFn),_.off(G.submit,G.submitFn),L.off(G.keyup,G.keyupFn),R.off(G.reset,G.resetFn),I=!1)}function l(t){return t=r.toString(t),!r.isEmpty(t)&&x.test(t)}function g(t){return r.isNull(t)?!1:(O.push(t),!0)}function p(t){if(r.isFloat(t)||(t=parseFloat(t)),0===t)return null;var n=moment().unix();return{id:b++,value:t,time:n,username:F,iso8601:moment.unix(n).toISOString()}}function h(t){if(!r.isInteger(t)||0>t||t>=O.length)return O;var n=O[t];return r.isUndefined(n)?O:n}function m(t){if(r.isInteger(t)||(t=parseInt(t)),0===t)return null;for(var n=0,e=O.length;e>n;n++){var i=O[n];if(i.id===t)return i.username}return null}function d(t){if(r.isInteger(t)||(t=parseInt(t)),0!==t)for(var n=0,e=O.length;e>n;n++){var i=O[n];if(i.id===t){O.splice(n,1);break}}}function E(t){P.handlebars("add",j,t,{remove_type:"same",validate:!r.isEmpty(t)})}function N(t){return r.stringContains(t,",")?t.replace(",","."):t}function v(){O=k.get();var t=r.arrayPeek(O);r.isUndefined(t)||(b=t.id),b++}var T="1.0.0",y="772C021E-61EA-4B15-8330-B2274E891371",S={USERS:"users",WEIGHT_BY_ID:"weights/{id}",WEIGHT_BY_USERNAME_AND_ID:"users/{username}/weights/{id}",WEIGHTS_ALL:"weights",WEIGHTS_BY_USERNAME:"users/{username}/weights"},I=!1,A=!1,O=[],b=0,F=["softwarespot","squidge","brainbox"],w=null,P=null,_=null,L=null,R=null,C=null,U=null,D=null,j=null,x=/^(?!0+)(?:\d+(?:[.,]\d)?)$/,G={keyup:"keyup.weight.app",remove:"click.remove.weight.app",reset:"click.reset.weight.app",select:r.events.USER_SELECT,submit:"submit.weight.app",keyupFn:function(t){t.preventDefault();var n=t.currentTarget.value;return l(n)?(C.prop("disabled",!1),i):(C.prop("disabled",!0),i)},resetFn:function(){NProgress.done(),U.addClass("hide"),k.clear(),r.arrayClear(h()),E(h())},removeFn:function(n){n.preventDefault();var e=n.currentTarget.getAttribute(D),i=r.api["delete"](S.WEIGHT_BY_USERNAME_AND_ID,{id:e,username:m(e)});i.then(function(t){e=r.isDebug()?e:t.id,d(e),k.set(h()),E(h())}),i["catch"](function(){t.alert("Some error occurred with DELETE'in the weight value")})},selectFn:function(t){F=t,r.api.get(S.WEIGHTS_BY_USERNAME,{username:F}).then(function(t){if(k.clear(),v(),r.isDebug())for(var n=0,e=r.randomNumber(5,20);e>n;n++)g(p(1*r.randomNumber(45,200)));else t.forEach(function(t){g(t)});k.set(h()),v(),E(h())})["catch"](function(){E(h())})},submitFn:function(n){n.preventDefault();var e=n.currentTarget[0];C.prop("disabled",!0);var o=e.value;if(!l(o))return U.removeClass("hide"),i;L.val(""),U.addClass("hide"),o=N(o);var u=r.api.post(S.WEIGHTS_BY_USERNAME,{username:F},{id:0,value:o,time:0,username:F});u.then(function(t){t=r.isDebug()?p(o):t,g(t)&&(k.set(h()),E(h()))}),u["catch"](function(){t.alert("Some error occurred with POST'in the weight value")})}},k={key:y+"_weight_list.app",_has:null,clear:function(){try{t.sessionStorage.removeItem(this.key)}catch(n){t.console.log("An error occurred with _session.clear()")}},has:function(){if(this._has)return this._has();var n=t.sessionStorage;return r.isObject(n)&&"key"in n&&"getItem"in n&&"setItem"in n&&"removeItem"in n&&"clear"in n},remove:this.clear,get:function(){var n=null;try{n=t.sessionStorage.getItem(this.key)}catch(e){t.console.log("An error occurred with _session.get()")}return r.isNullOrUndefined(n)?[]:t.JSON.parse(n)},set:function(n){if(r.isArray(n))try{t.sessionStorage.setItem(this.key,t.JSON.stringify(n))}catch(e){t.console.log("An error occurred with _session.set()")}}};return e(function(){o({dataId:"data-weight-id",dom:{forms:{weight:"#weight-post-form"},weightList:"#weight-list",weightListError:"#weight-list-error"},templates:{weightList:"#template-weight-list"}})}),{init:o,destroy:u,getVersion:s,isValidWeight:l}}(this,this.document,this.jQuery,App.core);